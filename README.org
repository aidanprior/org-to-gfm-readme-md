#+title: readme.el

#+headers: :tangle readme.el
#+begin_src emacs-lisp
  (defun readme/as-markdown ()
    (defvar bootstrap-version)
    (let ((bootstrap-file
	   (expand-file-name "straight/repos/straight.el/bootstrap.el" user-emacs-directory))
	  (bootstrap-version 6))
      (unless (file-exists-p bootstrap-file)
	(with-current-buffer
	    (url-retrieve-synchronously
	     "https://raw.githubusercontent.com/radian-software/straight.el/develop/install.el"
	     'silent 'inhibit-cookies)
	  (goto-char (point-max))
	  (eval-print-last-sexp)))
      (load bootstrap-file nil 'nomessage))

    (straight-use-package
     '(ox-md-title :type git :host github :repo "jeffkreeftmeijer/ox-md-title.el"))

    (use-package ox-gfm)
    (require 'ox-md-title)

    (org-md-title-add)
    (org-gfm-export-as-markdown)
    (org-md-title-remove)

    (princ (buffer-string)))
#+end_src

#+begin_src shell
  emacs --batch README.org --load readme.el --funcall readme/as-markdown > README.md
#+end_src

#+RESULTS:
